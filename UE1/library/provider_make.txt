1) building the library:

compilation:
g++ -std=c++14 -D PROVIDER_API_EXPORTS -D SYSTEM_LINUX -o provider.o -I./ -c ./provider.cpp
--> returns provider.o

linking:
g++ -std=c++14 -shared -fPIC -o provider.dylib ./provider.o -L./
--> returns providerlib.dylib

2) testing:

compilation:
g++ -std=c++14 -I./ -c providerlibtest.cpp
--> returns providerlibtest.o

linking executable:
 g++ -std=c++14 -Wl,-rpath='./' -o providerlibtest -L./ providerlibtest.o -l providerlib
--> returns test